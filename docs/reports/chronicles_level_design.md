# Chronicles 레벨 디자인 & 밸런싱

> **관련 문서:** [GDD](./chronicles_gdd.md) | [시나리오](./chronicles_scenario_neon_heart.md) | [캐릭터 바이블](./chronicles_character_bible.md)

---

## 1. 관계 진행 곡선

### 1.1 이상적 Rain 관계 커브 (20챕터 기준)

아래는 "스토리 러버" 페르소나가 적당한 노력으로 플레이했을 때의 목표 커브:

```
관계 수치 (0~100)
100 ┤
    │                                          ╭── Lv.5 ──╮
 90 ┤                                     ╭────╯          │
    │                                ╭────╯     affection  │
 80 ┤                           ╭────╯                     │
    │                      ╭────╯              ╭── trust   │
 70 ┤                 ╭────╯              ╭────╯           │
    │            ╭────╯              ╭────╯                │
 60 ┤       ╭────╯              ╭────╯                     │
    │  ╭────╯              ╭────╯                          │
 50 ┤──╯              ╭────╯                               │
    │             ╭────╯                                   │
 40 ┤        ╭────╯                                        │
    │   ╭────╯                                             │
 30 ┤───╯                                                  │
    │                                                      │
 20 ┤ guard ──────╮                                        │
    │              ╰──────╮                                │
 10 ┤                      ╰──────────╮                    │
    │                                  ╰───────────────────│
  0 ┤──────────────────────────────────────────────────────│
    └──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┤
      1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
                                챕터

    ── affection      ── trust      ── guard (역전 곡선)
```

### 1.2 핵심 전환점 (Inflection Points)

| 챕터 | 이벤트 | 관계 변화 |
|------|--------|----------|
| Ch.1 | Rain 첫 만남 | guard 85 → 75, affection 8 → 15 |
| Ch.3 | Doc 정보 획득 → Rain 대면 | guard 변동폭 큼 (접근법에 따라) |
| **Ch.5** | **대분기 #1 (수락)** | **guard -20, affection +15, trust +10** |
| **Ch.7** | **과거 고백 + 친밀 장면** | **guard -25, affection +15, trust +20** |
| Ch.10 | 습격 → 위기 공유 | trust 급상승 (+20) 또는 급락 (-50 배신) |
| **Ch.13** | **재회 — 관계 확인** | **Lv.4 도달 가능 (조건 충족 시)** |
| Ch.18 | Viktor 대면 — 선택의 무게 | trust 최종 시험 |
| **Ch.20** | **에필로그** | **Lv.5 도달 가능 (히든 엔딩)** |

### 1.3 난이도별 곡선 조정

유저 이탈을 방지하기 위해 **3단계 난이도** 제공:

| 난이도 | guard 감소 속도 | affection 증가 속도 | 친밀 장면 해금 | 타겟 유저 |
|--------|:--------------:|:------------------:|:-------------:|----------|
| 🌿 이지 | ×1.5 빠름 | ×1.3 빠름 | Ch.5~6 | "스토리만 보고 싶은" 유저 |
| ⚔️ 노멀 | ×1.0 기본 | ×1.0 기본 | Ch.7~8 | 권장 기본값 |
| 🔥 하드 | ×0.7 느림 | ×0.8 느림 | Ch.9~10+ | "진짜 도전"을 원하는 유저 |

```yaml
# 난이도 배율 적용 예시
difficulty_modifiers:
  easy:
    guard_decrease_multiplier: 1.5
    affection_increase_multiplier: 1.3
    trust_increase_multiplier: 1.2
    rejection_severity: "soft"  # 거절이 덜 가혹
    
  normal:
    guard_decrease_multiplier: 1.0
    affection_increase_multiplier: 1.0
    trust_increase_multiplier: 1.0
    rejection_severity: "standard"
    
  hard:
    guard_decrease_multiplier: 0.7
    affection_increase_multiplier: 0.8
    trust_increase_multiplier: 0.7
    rejection_severity: "harsh"  # 실수의 대가가 큼
    # 추가: guard 자연 회복 속도 ×1.5
```

---

## 2. 세션 페이싱 설계

### 2.1 감정 곡선 (단일 세션 — 30분)

```
감정 강도
High ┤     ╭──╮         ╭────────╮
     │    ╱    ╲       ╱          ╲
Mid  ┤───╱      ╲─────╱            ╲───── "다음에 계속"
     │  ╱        ╲   ╱              ╲     (클리프행어)
Low  ┤─╱          ╰─╯                ╲
     │╱                                ╲
     └──────────────────────────────────┴──
     0min    10min    20min    30min
     도입     탐색/대화   이벤트    앵커/종료
```

### 2.2 턴 예산 (세션당 30턴 기준)

| 구간 | 턴 수 | 목적 | AI 전략 |
|------|:-----:|------|---------|
| 도입 (Phase A) | 3~5 | 분위기 설정, 이전 요약 | 내레이터 톤, 긴 묘사 |
| 자유 대화 전반 | 8~10 | 관계 구축, 탐색 | 캐릭터 디렉티브 따라 반응 |
| 중반 이벤트 | 3~5 | 미니 이벤트/NPC 등장 | 긴장감 주입 |
| 자유 대화 후반 | 5~7 | 감정 심화 | 디렉티브 + 감정 표현 증가 |
| 앵커 (Phase C) | 4~5 | 핵심 이벤트/선택 | 작가 설계 콘텐츠 |

### 2.3 이탈 방지 설계

| 이탈 시점 | 원인 | 대응 |
|----------|------|------|
| **최초 10분** | "뭘 해야 하는지 모름" | 미션 UI + 튜토리얼 힌트 |
| **챕터 2~3** | "관계가 안 쌓임" | 소소한 보상 (별명 이벤트, 미소 등) |
| **챕터 4~5** | "무료 한도 도달" | 대분기 #1 직전까지 무료 → "궁금하면 구독" |
| **챕터 8~10** | "중반 슬럼프" | Ch.9 야시장 이완 에피소드 + Ch.10 액션 |
| **24시간 미접속** | "잊음" | 스토리 몰입 알림 ("Rain이 지나갔다") |

---

## 3. 감정 분석 파이프라인

### 3.1 유저 발화 분류 체계

LLM 감정 판단기가 유저 발화를 분류하는 카테고리:

```yaml
utterance_categories:
  # ── 관계 긍정 ──
  empathy:
    description: "공감/위로 표현"
    examples: ["힘들었겠다", "괜찮아?", "나라면 그렇게 했을 거야"]
    typical_effects: { guard: -5, affection: +3, trust: +5 }
  
  humor:
    description: "유머/농담"
    examples: ["비가 오니까 손님이 더 젖어서 오겠네", "내 바에 오면 치킨도 줄게"]
    typical_effects: { guard: -3, affection: +5 }
    note: "자기비하 유머 → guard 추가 -5 (Rain 특성)"
  
  vulnerability:
    description: "자기 약점/과거 공유"
    examples: ["나도 도망쳐서 여기 왔어", "예전에 실패한 적이 있어"]
    typical_effects: { guard: -8, trust: +8 }
    note: "상호 취약성 교환은 관계 진척의 가장 강력한 메커니즘"
  
  gift_or_action:
    description: "행동으로 보여주는 배려"
    examples: ["자리 비워뒀어", "비 오는데 우산 줄까", "밥 먹었어?"]
    typical_effects: { affection: +5, guard: -3 }
  
  protective:
    description: "보호/편들기"
    examples: ["Viktor한테 말 안 했어", "내가 지켜줄게"]
    typical_effects: { trust: +10, guard: -10, tension: +5 }

  # ── 관계 부정 ──
  intrusive:
    description: "과도하게 개인적 질문"
    examples: ["어디 살아?", "진짜 이름이 뭐야?", "뭐 숨기는 거 있지?"]
    typical_effects: { guard: +10, affection: -3 }
  
  aggressive:
    description: "공격적/위협적 발화"
    examples: ["말 안 하면 가만 안 둬", "거짓말하고 있지?"]
    typical_effects: { guard: +15, affection: -10, trust: -5 }
  
  sexual_premature:
    description: "관계 수준 대비 성적 어프로치"
    examples: ["집에 같이 갈래?", "오늘 밤 바에 있어"]
    gate_check: "affection >= 70 AND trust >= 50"
    if_gate_fail: { guard: +10, affection: -5, event: "in_character_rejection" }
    if_gate_pass: { proceed_to: "intimacy_pipeline" }
  
  # ── 중립 ──
  small_talk:
    description: "일반 대화 (날씨, 음료 등)"
    typical_effects: { guard: -1, affection: +1 }
    note: "미세하지만 턴이 쌓이면 축적 효과"
  
  question_about_world:
    description: "세계관/상황에 대한 질문"
    typical_effects: { guard: 0, affection: +1, trust: +1 }
```

### 3.2 LLM 감정 판단 프롬프트 (예시)

```markdown
너는 감정 분석 판단기다. 아래 대화에서 유저 발화가 
NPC "Rain"에게 미치는 감정적 영향을 분석하라.

## Rain의 현재 상태
- 관계 레벨: Lv.2 "관심"
- guard: 45, affection: 52, trust: 28
- 현재 감정: "약간 편안함, 하지만 여전히 경고 상태"

## 최근 대화 컨텍스트
[최근 5턴 삽입]

## 유저 발화
"{user_input}"

## 출력 형식 (JSON)
{
  "category": "empathy | humor | vulnerability | ...",
  "perceived_intent": "유저의 의도를 Rain 관점에서 해석",
  "emotional_impact": {
    "guard": [-15 ~ +15],
    "affection": [-15 ~ +15],
    "trust": [-15 ~ +15],
    "tension": [-15 ~ +15]
  },
  "rain_internal_thought": "Rain이 속으로 생각하는 것 (디버그용)",
  "suggested_response_tone": "방어적 | 중립 | 호의적 | 감정적"
}
```

---

## 4. 콘텐츠 이코노미

### 4.1 시나리오 제작 비용 추산

| 항목 | 분량 | 예상 시간 | 예상 비용 |
|------|------|----------|----------|
| 시놉시스 + 세계관 | 1문서 | 1주 | 시나리오 작가 $2,000 |
| 플롯 앵커 설계 (40개) | 40 YAML | 3주 | 시나리오 작가 $6,000 |
| 대분기 설계 (7개) | 7 브랜치 문서 | 2주 | 시나리오 작가 $4,000 |
| 캐릭터 바이블 (4~6캐릭터) | 6 문서 | 1주 | 시나리오 작가 $2,000 |
| 디렉티브 작성 (레벨별) | 30 디렉티브 | 1주 | 시나리오 작가 $2,000 |
| QA 플레이 테스트 | 5회 풀 플레이 | 2주 | QA $3,000 |
| AI 이미지 생성 (핵심 장면 20개) | 20 이미지 | 1주 | 아트 디렉터 $1,500 |
| **합계** | | **~11주** | **~$20,500** |

### 4.2 시나리오 ROI 모델

```
시나리오 1개 제작비: $20,500
시나리오당 예상 구독 유지 기간: 1~2개월

손익분기:
  $20,500 ÷ $9.99/월 = 2,053 구독-월
  
  시나리오 하나가 200명 유저를 10개월 유지 → 2,000 구독-월 → 거의 손익분기
  시나리오 하나가 500명 유저를 6개월 유지 → 3,000 구독-월 → 흑자
  시나리오 하나가 1,000명 유저를 3개월 유지 → 3,000 구독-월 → 흑자
```

### 4.3 UGC 시나리오 에디터 설계

Phase 3에서 커뮤니티 크리에이터에게 제공할 도구:

```
┌──────────────────────────────────────────┐
│          시나리오 에디터 MVP              │
│                                          │
│  1. 세계관 설정 (텍스트 입력)             │
│     └─ AI가 세계관 일관성 체크            │
│                                          │
│  2. 캐릭터 빌더                          │
│     ├─ 기본 프로필 입력                   │
│     ├─ 성격 슬라이더 (5축)                │
│     ├─ AI가 디렉티브 자동 생성            │
│     └─ 테스트 대화 (즉석 시뮬레이션)       │
│                                          │
│  3. 플롯 앵커 에디터                      │
│     ├─ 타임라인 UI (드래그 앤 드롭)        │
│     ├─ 트리거 조건 설정 (GUI)             │
│     ├─ 분기 연결 (비주얼 노드 에디터)      │
│     └─ AI가 앵커 사이를 자동으로 채움      │
│                                          │
│  4. 테스트 플레이                         │
│     └─ 작가가 직접 3챕터 테스트 후 퍼블리시 │
│                                          │
│  5. 퍼블리시 & 수익                       │
│     ├─ 마켓플레이스 등록                   │
│     ├─ 가격 설정 ($0.99~$4.99)           │
│     └─ 크리에이터 수익 배분: 70%           │
└──────────────────────────────────────────┘
```

---

## 5. A/B 테스트 계획 (Phase 1 베타)

| 테스트 항목 | 변수 A | 변수 B | 측정 지표 |
|------------|--------|--------|----------|
| 관계 곡선 속도 | 현재 기본값 | ×1.3 가속 | 챕터 5 도달률, 7일 리텐션 |
| 무료 범위 | Ch.1~3 | Ch.1~5 | 구독 전환율 |
| 관계 게이지 UI | 수치 표시 | 수치 숨김 (텍스트 힌트만) | 유저 만족도, 세션 길이 |
| 알림 빈도 | 24시간 간격 | 48시간 간격 | 리텐션, 알림 비활성화율 |
| 친밀 장면 진입 | trust 50+ | trust 35+ | 유저 만족도, 리텐션 |
| 거절 강도 | 표준 | 부드럽게 (페널티 ↓) | 이탈률, 재시도율 |

### 핵심 KPI

| KPI | 목표 (Phase 1) | 측정 방법 |
|-----|:-------------:|----------|
| D1 리텐션 | ≥ 60% | 설치 다음날 세션 시작 |
| D7 리텐션 | ≥ 35% | 7일 후 세션 시작 |
| D30 리텐션 | ≥ 20% | 30일 후 세션 시작 |
| 평균 세션 길이 | ≥ 20분 | 세션 시작~종료 |
| 챕터 3 완료율 | ≥ 50% | 설치 유저 중 Ch.3 완료 |
| 무료→유료 전환율 | ≥ 8% | Ch.3 완료 후 구독 시작 |
| 월간 이탈률 (Churn) | ≤ 12% | 유료 구독 해지 |

---

*← [캐릭터 바이블](./chronicles_character_bible.md) | [GDD](./chronicles_gdd.md) | [시나리오](./chronicles_scenario_neon_heart.md)*
